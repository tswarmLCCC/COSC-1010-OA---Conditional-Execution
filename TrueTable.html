<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logical Expression Evaluator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .card-enter {
            animation: card-enter 0.5s ease-out;
        }
        @keyframes card-enter {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .true-cell, .result-true {
            color: #16a34a; /* Green-600 */
            font-weight: 600;
        }
        .false-cell, .result-false {
            color: #dc2626; /* Red-600 */
            font-weight: 600;
        }
        code {
            background-color: rgba(0,0,0,0.05);
            padding: 2px 5px;
            border-radius: 4px;
            font-family: monospace;
        }
        .dark code {
             background-color: rgba(255,255,255,0.1);
        }
        .var-input {
            width: 80px;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-4xl bg-white dark:bg-gray-800 shadow-2xl rounded-2xl p-6 md:p-8 card-enter">

        <header class="text-center mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white">Logical Expression Evaluator</h1>
            <p class="text-gray-600 dark:text-gray-400 mt-2">See how logical operators work with real values and comparisons.</p>
        </header>

        <!-- Explanations Section -->
        <div class="mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-xl space-y-4">
            <div>
                <h2 class="text-xl font-semibold mb-3 text-gray-800 dark:text-white">How to Use</h2>
                <ol class="list-decimal list-inside text-gray-700 dark:text-gray-300 space-y-2">
                    <li><strong>Set your variables:</strong> Assign numbers to <code>p</code>, <code>q</code>, and <code>r</code> below.</li>
                    <li><strong>Write an expression:</strong> Use the variables and comparison operators (<code>></code>, <code><</code>, <code>===</code>, <code>!==</code>) to create conditions.</li>
                    <li><strong>Combine with logic:</strong> Connect your conditions with the logical operators <code>AND</code>, <code>OR</code>, and <code>NOT</code>.</li>
                </ol>
            </div>
             <ul class="space-y-3 text-gray-700 dark:text-gray-300 !mt-6">
                <li class="p-4 bg-white dark:bg-gray-600 rounded-lg shadow-sm">
                    <code>(condition1) AND (condition2)</code> is True only when <strong>both</strong> conditions are True.
                </li>
                <li class="p-4 bg-white dark:bg-gray-600 rounded-lg shadow-sm">
                    <code>(condition1) OR (condition2)</code> is True if <strong>at least one</strong> condition is True.
                </li>
                <li class="p-4 bg-white dark:bg-gray-600 rounded-lg shadow-sm">
                    <code>NOT (condition)</code> flips the result of the condition.
                </li>
            </ul>
        </div>
        
        <!-- Variable Inputs -->
        <div class="mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl">
             <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">1. Set Variable Values</h3>
             <div class="flex items-center justify-center gap-4 flex-wrap">
                <label class="font-bold text-xl">p = <input type="number" id="p_val" class="var-input p-2 rounded-md bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500" value="10"></label>
                <label class="font-bold text-xl">q = <input type="number" id="q_val" class="var-input p-2 rounded-md bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500" value="5"></label>
                <label class="font-bold text-xl">r = <input type="number" id="r_val" class="var-input p-2 rounded-md bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500" value="20"></label>
             </div>
        </div>

        <!-- Expression Input Section -->
        <div class="mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">2. Write a Logical Expression</h3>
            <div class="flex flex-col md:flex-row gap-4">
                <input type="text" id="expressionInput" class="flex-grow p-3 bg-white dark:bg-gray-600 border-2 border-gray-300 dark:border-gray-500 focus:border-blue-500 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition" value="(p > 0) AND (q < 10)">
                <button id="generateBtn" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 transition-transform transform hover:scale-105">
                    Evaluate
                </button>
            </div>
             <div class="mt-4">
                <h3 class="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2">Or try an example:</h3>
                <div class="flex flex-wrap gap-2">
                    <button class="example-btn bg-gray-200 dark:bg-gray-600 px-3 py-1 rounded-md text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition" data-expr="(p > q) AND (r > p)">(p > q) AND (r > p)</button>
                    <button class="example-btn bg-gray-200 dark:bg-gray-600 px-3 py-1 rounded-md text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition" data-expr="(p === 10) OR (q === 10)">(p === 10) OR (q === 10)</button>
                    <button class="example-btn bg-gray-200 dark:bg-gray-600 px-3 py-1 rounded-md text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition" data-expr="NOT (p > r)">NOT (p > r)</button>
                </div>
            </div>
        </div>

        <!-- Output Section -->
        <div id="output" class="p-4 bg-gray-50 dark:bg-gray-700 rounded-xl">
             <div id="placeholder" class="text-center text-gray-500 dark:text-gray-400 py-10">
                <p>Your evaluation breakdown will appear here.</p>
            </div>
        </div>
    </div>

    <script>
        const generateBtn = document.getElementById('generateBtn');
        const expressionInput = document.getElementById('expressionInput');
        const outputDiv = document.getElementById('output');
        const placeholderDiv = document.getElementById('placeholder');
        const exampleBtns = document.querySelectorAll('.example-btn');

        // Main evaluation function
        const evaluate = () => {
            const expression = expressionInput.value.trim();
            if (!expression) {
                showError("Please enter an expression.");
                return;
            }

            try {
                const p = parseFloat(document.getElementById('p_val').value);
                const q = parseFloat(document.getElementById('q_val').value);
                const r = parseFloat(document.getElementById('r_val').value);

                const values = { p, q, r };
                
                // Regex to find parenthesized expressions or standalone comparisons
                const subExpressions = expression.match(/\([^)]+\)|[a-zA-Z0-9_.]+\s*(?:[<>]=?|===?|!==?)\s*[a-zA-Z0-9_.]+/g) || [];
                
                let evaluationSteps = [];

                // Evaluate each sub-expression for the breakdown display
                subExpressions.forEach((sub) => {
                    const subResult = evaluateSubExpression(sub, values);
                    evaluationSteps.push({ step: sub, result: subResult });
                });

                // Get the final result by evaluating the entire expression at once
                const finalResult = evaluateSubExpression(expression, values);
                
                renderEvaluation(expression, values, evaluationSteps, finalResult);

            } catch (e) {
                showError(`Error evaluating expression: ${e.message}. Check your syntax.`);
                console.error(e);
            }
        };

        // Evaluates a full or partial expression string
        const evaluateSubExpression = (expr, values) => {
            // Start with a copy of the expression
            let jsExpr = expr;
            
            // Replace p, q, r variables with their actual numerical values
            for (const variable in values) {
                if (isNaN(values[variable])) continue;
                const regex = new RegExp(`\\b${variable}\\b`, 'g');
                jsExpr = jsExpr.replace(regex, values[variable]);
            }
            
            // Replace user-friendly logical operators with JavaScript equivalents.
            // Using spaces around the operators ensures that "trueANDfalse" becomes "true && false".
            jsExpr = jsExpr
                .replace(/\bAND\b/gi, '&&')
                .replace(/\bOR\b/gi, '||')
                .replace(/\bNOT\b/gi, '!');
            
            // Using the Function constructor is a safer way to evaluate the string than eval()
            return new Function(`return ${jsExpr}`)();
        };
        
        // Renders the step-by-step evaluation
        const renderEvaluation = (expression, values, steps, finalResult) => {
            if(placeholderDiv) placeholderDiv.style.display = 'none';
            outputDiv.innerHTML = ''; 

            let html = `<h3 class="text-lg font-semibold mb-3 text-gray-800 dark:text-white">Evaluation Breakdown</h3>`;
            html += `<div class="space-y-2 font-mono text-sm">`;

            // Initial Expression
            const valuedExpression = expression.replace(/p/g, values.p).replace(/q/g, values.q).replace(/r/g, values.r)
            html += `<div class="p-2 bg-white dark:bg-gray-600 rounded"><strong>Expression:</strong> ${expression}</div>`;
            html += `<div class="p-2 bg-white dark:bg-gray-600 rounded"><strong>With Values:</strong> ${valuedExpression}</div>`;
            
            // Steps
            if (steps.length > 0) {
                html += `<h4 class="font-semibold pt-2 text-gray-600 dark:text-gray-400">Steps:</h4>`;
                let tempExpr = valuedExpression;
                steps.forEach(s => {
                    const resultClass = s.result ? 'result-true' : 'result-false';
                    const valuedStep = s.step.replace(/p/g, values.p).replace(/q/g, values.q).replace(/r/g, values.r);
                    html += `<div class="p-2 bg-gray-100 dark:bg-gray-800 rounded">Evaluating <code>${valuedStep}</code> ... result is <strong class="${resultClass}">${s.result}</strong></div>`;
                    tempExpr = tempExpr.replace(valuedStep, s.result);
                });
                html += `<div class="p-2 bg-gray-100 dark:bg-gray-800 rounded">Intermediate: ${tempExpr}</div>`;
            }

            // Final Result
            const finalResultClass = finalResult ? 'result-true' : 'result-false';
            html += `<div class="mt-4 p-3 bg-blue-50 dark:bg-blue-900/50 rounded text-lg text-center"><strong>Final Result: </strong><strong class="${finalResultClass}">${finalResult}</strong></div>`;

            html += `</div>`;
            outputDiv.innerHTML = html;
        };

        const showError = (message) => {
            outputDiv.innerHTML = `
                <div class="text-center text-red-500 py-10 px-4">
                    <p class="font-semibold">Oops! Something went wrong.</p>
                    <p class="text-sm mt-1">${message}</p>
                </div>
            `;
             if(placeholderDiv) placeholderDiv.style.display = 'none';
        };

        // Event Listeners
        generateBtn.addEventListener('click', evaluate);
        expressionInput.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') evaluate();
        });
        exampleBtns.forEach(button => {
            button.addEventListener('click', () => {
                expressionInput.value = button.dataset.expr;
                evaluate();
            });
        });
        
        // Generate the initial evaluation on page load
        window.addEventListener('load', evaluate);

    </script>
</body>
</html>

v
